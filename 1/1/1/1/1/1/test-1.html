<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyse de la D√©mocratie Belge - Tableau de Bord Interactif</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'DM Sans', sans-serif; background-color: #F5F5F0; color: #2D2D2A; }
        h1, h2, h3 { font-family: 'Lora', serif; }
        
        /* Custom Scrollbar for cleaner look */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #EBEBE5; }
        ::-webkit-scrollbar-thumb { background: #C5C5B5; rounded: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #A0A090; }

        /* Chart Container Safety Styles */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%; 
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container { height: 400px; }
        }

        /* Interactive Element Transitions */
        .interactive-card { transition: all 0.3s ease; border-left: 4px solid transparent; }
        .interactive-card:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .interactive-card.active { border-left-color: #D64045; background-color: #FFFFFF; }
        
        /* Tab Navigation */
        .nav-btn { position: relative; padding-bottom: 2px; color: #8C8C80; transition: color 0.3s; }
        .nav-btn::after { content: ''; position: absolute; left: 0; bottom: 0; width: 0; height: 2px; background: #D64045; transition: width 0.3s; }
        .nav-btn.active { color: #D64045; font-weight: 700; }
        .nav-btn.active::after { width: 100%; }

        /* Utility for Text selection prevention on interactive elements */
        .no-select { user-select: none; -webkit-user-select: none; }
    </style>
    <!-- Chosen Palette: Warm Neutrals (Background #F5F5F0, Text #2D2D2A) with Muted Belgian Accents (Red #D64045, Ochre #E9B44C, Slate #4A5568). Designed for calm readability and focus. -->
    
    <!-- Application Structure Plan:
         The SPA is structured as an "Explorable Dashboard" rather than a linear report.
         1. Header: Contextualizes the analysis (Complexity rating, key metaphor).
         2. Tabbed Navigation: Allows non-linear exploration of 4 key dimensions:
            - STRUCTURE (The "Lasagne"): Explains the complex federal/regional layers.
            - DYNAMICS (The Landscape): Visualizes political fragmentation.
            - PERFORMANCE (The Output): Data on efficiency (formation time) and trust.
            - REFORMS (The Future): Proposed solutions.
         3. Content Area: Dynamic container updating based on active tab.
         Rationale: The Belgian system is overwhelming. Grouping by dimension reduces cognitive load, allowing the user to focus on one aspect of the "problem" at a time.
    -->

    <!-- Visualization & Content Choices:
         1. STRUCTURE: Interactive Accordion Grid. Goal: Organize. Why? The "Lasagne" metaphor requires separating layers. Interaction: Click to reveal competencies. Method: HTML/JS (No SVG).
         2. DYNAMICS: Scatter Plot (Chart.js). Goal: Relationships. Why? Shows the Left/Right vs Unitarian/Separatist divide unique to Belgium. Interaction: Tooltip details. Method: Chart.js Canvas.
         3. PERFORMANCE (Formation): Bar Chart. Goal: Compare. Why? Highlights the 2010 world record vs average. Method: Chart.js Canvas.
         4. PERFORMANCE (Trust): Line Chart. Goal: Change. Why? Shows trend of blank votes/disengagement. Method: Chart.js Canvas.
         5. REFORMS: Tagged Cards. Goal: Inform. Why? Quick scanning of qualitative proposals. Method: HTML/Tailwind.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-[#EBEBE5] border-b border-[#DCDCD5] pt-8 pb-6 px-4 sticky top-0 z-20 shadow-sm backdrop-blur-sm bg-opacity-95">
        <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
            <div>
                <div class="text-[#D64045] font-bold tracking-widest text-xs uppercase mb-2">Analyse Politique</div>
                <h1 class="text-3xl md:text-4xl font-serif font-bold text-[#2D2D2A]">Le Labyrinthe Belge</h1>
                <p class="text-[#6D6D60] mt-1 max-w-xl">Une exploration interactive de la complexit√© d√©mocratique, de la fragmentation politique et des pistes de renouveau.</p>
            </div>
            <div class="flex gap-3">
                <div class="bg-white px-4 py-2 rounded shadow-sm border border-[#DCDCD5]">
                    <span class="block text-xs text-[#8C8C80] uppercase font-bold">Complexit√©</span>
                    <span class="text-[#D64045] font-bold">Critique</span>
                </div>
                <div class="bg-white px-4 py-2 rounded shadow-sm border border-[#DCDCD5]">
                    <span class="block text-xs text-[#8C8C80] uppercase font-bold">Niveau</span>
                    <span class="text-[#E9B44C] font-bold">F√©d√©ral</span>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <nav class="max-w-6xl mx-auto mt-8 border-b border-[#C5C5B5] flex gap-8 overflow-x-auto no-scrollbar">
            <button onclick="switchTab('structure')" id="nav-structure" class="nav-btn active pb-3 text-lg whitespace-nowrap">La Structure</button>
            <button onclick="switchTab('landscape')" id="nav-landscape" class="nav-btn pb-3 text-lg whitespace-nowrap">Paysage Politique</button>
            <button onclick="switchTab('performance')" id="nav-performance" class="nav-btn pb-3 text-lg whitespace-nowrap">Performance</button>
            <button onclick="switchTab('reforms')" id="nav-reforms" class="nav-btn pb-3 text-lg whitespace-nowrap">Pistes de R√©forme</button>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="flex-grow bg-[#F5F5F0] px-4 py-8">
        <div class="max-w-6xl mx-auto min-h-[60vh]">
            
            <!-- SECTION 1: STRUCTURE -->
            <section id="view-structure" class="animate-fade-in block">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-3">La "Lasagne" Institutionnelle</h2>
                    <p class="text-lg text-[#4A5568] leading-relaxed max-w-3xl">
                        La Belgique ne fonctionne pas selon une hi√©rarchie classique, mais selon le principe d'<strong>√©quipollence des normes</strong>. 
                        Une d√©cision r√©gionale a la m√™me force juridique qu'une loi f√©d√©rale. Cliquez sur les couches pour comprendre qui g√®re quoi.
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                    <!-- Interactive List -->
                    <div class="lg:col-span-5 space-y-3">
                        <button onclick="showLayer('federal')" class="interactive-card w-full text-left bg-white p-5 rounded shadow-sm hover:bg-gray-50 active border-l-4 border-[#2D2D2A]" id="btn-federal">
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-lg">1. L'√âtat F√©d√©ral</span>
                                <span class="text-xs bg-[#2D2D2A] text-white px-2 py-1 rounded">National</span>
                            </div>
                            <p class="text-sm text-[#8C8C80] mt-1">Les socles communs de la nation.</p>
                        </button>

                        <button onclick="showLayer('regions')" class="interactive-card w-full text-left bg-white p-5 rounded shadow-sm hover:bg-gray-50 border-l-4 border-transparent" id="btn-regions">
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-lg text-[#2D2D2A]">2. Les R√©gions (3)</span>
                                <span class="text-xs bg-[#4A5568] text-white px-2 py-1 rounded">Sol & √âco</span>
                            </div>
                            <p class="text-sm text-[#8C8C80] mt-1">Li√©es au territoire : Bruxelles, Flandre, Wallonie.</p>
                        </button>

                        <button onclick="showLayer('communities')" class="interactive-card w-full text-left bg-white p-5 rounded shadow-sm hover:bg-gray-50 border-l-4 border-transparent" id="btn-communities">
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-lg text-[#2D2D2A]">3. Les Communaut√©s (3)</span>
                                <span class="text-xs bg-[#E9B44C] text-white px-2 py-1 rounded">Personnes</span>
                            </div>
                            <p class="text-sm text-[#8C8C80] mt-1">Li√©es √† la langue et la culture.</p>
                        </button>
                    </div>

                    <!-- Detail Display -->
                    <div class="lg:col-span-7 bg-white p-8 rounded-lg shadow-md border border-[#DCDCD5] min-h-[300px] flex flex-col justify-center">
                        <div id="layer-content-federal" class="layer-content transition-opacity duration-300">
                            <h3 class="text-xl font-bold mb-4 text-[#D64045] border-b pb-2">Comp√©tences F√©d√©rales</h3>
                            <p class="mb-4 text-[#4A5568]">G√®re tout ce qui concerne l'int√©r√™t g√©n√©ral de tous les Belges, ind√©pendamment de leur langue ou lieu de r√©sidence.</p>
                            <ul class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üõ°Ô∏è D√©fense Nationale</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üëÆ Justice & Police</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üíä S√©curit√© Sociale (Pensions)</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">‚ò¢Ô∏è Nucl√©aire & √ânergie</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üöÜ SNCB (Trains)</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üí∞ Finances & Dette</li>
                            </ul>
                        </div>
                        <div id="layer-content-regions" class="layer-content hidden transition-opacity duration-300">
                            <h3 class="text-xl font-bold mb-4 text-[#4A5568] border-b pb-2">Comp√©tences R√©gionales</h3>
                            <p class="mb-4 text-[#4A5568]">Comp√©tences li√©es au "sol" et √† l'√©conomie locale. Elles g√®rent l'am√©nagement du territoire.</p>
                            <ul class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üèóÔ∏è Urbanisme & Logement</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üå≥ Environnement & Eau</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üíº √âconomie & Emploi</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üöú Agriculture</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üöå Transports (TEC/De Lijn)</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üõ£Ô∏è Travaux Publics</li>
                            </ul>
                        </div>
                        <div id="layer-content-communities" class="layer-content hidden transition-opacity duration-300">
                            <h3 class="text-xl font-bold mb-4 text-[#E9B44C] border-b pb-2">Comp√©tences Communautaires</h3>
                            <p class="mb-4 text-[#4A5568]">Comp√©tences li√©es √† la "personne". Elles suivent l'individu selon sa langue (Fran√ßais, N√©erlandais, Allemand).</p>
                            <ul class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üéì Enseignement</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üé≠ Culture & M√©dias</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üè• Sant√© (Pr√©ventive)</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">‚öΩ Sport</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üë∂ Aide √† la jeunesse</li>
                                <li class="bg-[#F5F5F0] p-3 rounded text-sm font-medium">üó£Ô∏è Emploi des langues</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 2: LANDSCAPE -->
            <section id="view-landscape" class="hidden animate-fade-in">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-1">
                        <h2 class="text-2xl font-bold mb-3">Fragmentation Politique</h2>
                        <p class="text-[#4A5568] mb-6">
                            La Belgique n'a pas de partis nationaux. Le paysage est divis√© en deux d√©mocraties distinctes (Nord et Sud).
                            <br><br>
                            Ce graphique positionne les partis selon deux axes cruciaux :
                            <br>
                            <strong>X : √âconomie</strong> (Gauche - Droite)
                            <br>
                            <strong>Y : Institutionnel</strong> (Unitaire - S√©paratiste)
                        </p>
                        <div class="bg-white p-4 rounded shadow-sm border border-[#DCDCD5]">
                            <h4 class="font-bold text-sm uppercase text-[#8C8C80] mb-2">Cl√© de lecture</h4>
                            <ul class="space-y-2 text-sm">
                                <li class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-[#E11D48]"></span> Socialistes (PS/Vooruit)</li>
                                <li class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-[#2563EB]"></span> Lib√©raux (MR/OpenVLD)</li>
                                <li class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-[#16A34A]"></span> √âcologistes</li>
                                <li class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-[#D97706]"></span> Nationalistes Flamands</li>
                                <li class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-[#991B1B]"></span> Gauche Radicale (PTB)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="lg:col-span-2 bg-white p-4 rounded-lg shadow-md border border-[#DCDCD5]">
                        <div class="chart-container">
                            <canvas id="scatterChart"></canvas>
                        </div>
                        <p class="text-center text-xs text-[#8C8C80] mt-2 italic">Survolez les points pour voir les d√©tails.</p>
                    </div>
                </div>
            </section>

            <!-- SECTION 3: PERFORMANCE -->
            <section id="view-performance" class="hidden animate-fade-in">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-3">Performance & Confiance</h2>
                    <p class="text-lg text-[#4A5568] max-w-3xl">
                        La complexit√© du syst√®me a un co√ªt : la difficult√© de former des coalitions et une √©rosion progressive de la confiance citoyenne.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Formation Time Chart -->
                    <div class="bg-white p-6 rounded-lg shadow-md border border-[#DCDCD5]">
                        <h3 class="font-bold text-lg mb-2">Jours pour former un gouvernement</h3>
                        <p class="text-sm text-[#6D6D60] mb-4">Comparaison des crises majeures par rapport √† la moyenne europ√©enne.</p>
                        <div class="chart-container h-64 md:h-80">
                            <canvas id="formationChart"></canvas>
                        </div>
                    </div>

                    <!-- Blank Votes Chart -->
                    <div class="bg-white p-6 rounded-lg shadow-md border border-[#DCDCD5]">
                        <h3 class="font-bold text-lg mb-2">Le Rejet : Votes Blancs et Nuls</h3>
                        <p class="text-sm text-[#6D6D60] mb-4">Malgr√© le vote obligatoire, une part croissante de la population refuse de choisir.</p>
                        <div class="chart-container h-64 md:h-80">
                            <canvas id="blankVotesChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- KPI Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                    <div class="bg-[#FDFBF7] p-6 rounded border-t-4 border-[#D64045] shadow-sm">
                        <div class="text-3xl font-bold text-[#2D2D2A] mb-1">541 Jours</div>
                        <div class="text-sm font-medium text-[#6D6D60] uppercase">Record Mondial (2010-2011)</div>
                        <p class="text-xs text-[#8C8C80] mt-2">Temps sans gouvernement de plein exercice.</p>
                    </div>
                    <div class="bg-[#FDFBF7] p-6 rounded border-t-4 border-[#E9B44C] shadow-sm">
                        <div class="text-3xl font-bold text-[#2D2D2A] mb-1">6 Gouvernements</div>
                        <div class="text-sm font-medium text-[#6D6D60] uppercase">Simultan√©s</div>
                        <p class="text-xs text-[#8C8C80] mt-2">F√©d√©ral, Flamand, Wallon, Bxl, FWB, Germanophone.</p>
                    </div>
                    <div class="bg-[#FDFBF7] p-6 rounded border-t-4 border-[#4A5568] shadow-sm">
                        <div class="text-3xl font-bold text-[#2D2D2A] mb-1">~17%</div>
                        <div class="text-sm font-medium text-[#6D6D60] uppercase">Absent√©isme + Blancs</div>
                        <p class="text-xs text-[#8C8C80] mt-2">Estimation du "Non-vote" effectif.</p>
                    </div>
                </div>
            </section>

            <!-- SECTION 4: REFORMS -->
            <section id="view-reforms" class="hidden animate-fade-in">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-3">Pistes de R√©forme</h2>
                    <p class="text-lg text-[#4A5568] max-w-3xl">
                        Face aux blocages, des solutions innovantes √©mergent du monde acad√©mique et citoyen pour revitaliser la d√©mocratie belge.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Reform Card 1 -->
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-[#DCDCD5] hover:shadow-md transition-shadow">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-lg text-[#2D2D2A]">Circonscription F√©d√©rale</h3>
                            <span class="px-2 py-1 bg-[#EBEBE5] text-xs font-bold text-[#6D6D60] rounded">Structurel</span>
                        </div>
                        <p class="text-[#4A5568] mb-4 text-sm leading-relaxed">
                            Cr√©er une liste √©lectorale unique pour tout le pays. Actuellement, un Flamand ne peut pas voter pour un Wallon et vice-versa.
                        </p>
                        <div class="bg-[#F5F5F0] p-3 rounded text-sm text-[#2D2D2A]">
                            <strong>Objectif :</strong> Forcer les politiques √† s√©duire les √©lecteurs de l'autre communaut√© et recr√©er un espace public national.
                        </div>
                    </div>

                    <!-- Reform Card 2 -->
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-[#DCDCD5] hover:shadow-md transition-shadow">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-lg text-[#2D2D2A]">Commissions D√©lib√©ratives</h3>
                            <span class="px-2 py-1 bg-[#EBEBE5] text-xs font-bold text-[#6D6D60] rounded">Participatif</span>
                        </div>
                        <p class="text-[#4A5568] mb-4 text-sm leading-relaxed">
                            Assembl√©es mixtes compos√©es de d√©put√©s √©lus et de citoyens tir√©s au sort (d√©j√† actif √† Bruxelles).
                        </p>
                        <div class="bg-[#F5F5F0] p-3 rounded text-sm text-[#2D2D2A]">
                            <strong>Objectif :</strong> R√©duire le foss√© citoyen-politique et traiter des sujets de long terme sans pression √©lectorale.
                        </div>
                    </div>

                    <!-- Reform Card 3 -->
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-[#DCDCD5] hover:shadow-md transition-shadow">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-lg text-[#2D2D2A]">Ref√©d√©ralisation</h3>
                            <span class="px-2 py-1 bg-[#EBEBE5] text-xs font-bold text-[#6D6D60] rounded">Institutionnel</span>
                        </div>
                        <p class="text-[#4A5568] mb-4 text-sm leading-relaxed">
                            Ramener certaines comp√©tences (ex: Sant√©, Climat) au niveau f√©d√©ral pour plus d'efficacit√© et de coh√©rence.
                        </p>
                        <div class="bg-[#F5F5F0] p-3 rounded text-sm text-[#2D2D2A]">
                            <strong>Objectif :</strong> Simplifier la "lasagne" et √©viter que 4 ministres du climat se rendent √† la COP.
                        </div>
                    </div>

                    <!-- Reform Card 4 -->
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-[#DCDCD5] hover:shadow-md transition-shadow">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-lg text-[#2D2D2A]">Conf√©d√©ralisme</h3>
                            <span class="px-2 py-1 bg-[#EBEBE5] text-xs font-bold text-[#6D6D60] rounded">Institutionnel</span>
                        </div>
                        <p class="text-[#4A5568] mb-4 text-sm leading-relaxed">
                            L'inverse de la ref√©d√©ralisation : transf√©rer la quasi-totalit√© des pouvoirs aux R√©gions, le F√©d√©ral ne gardant que le strict minimum.
                        </p>
                        <div class="bg-[#F5F5F0] p-3 rounded text-sm text-[#2D2D2A]">
                            <strong>Objectif :</strong> Permettre aux deux d√©mocraties de suivre leurs propres logiques (souvent divergentes).
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-[#2D2D2A] text-[#EBEBE5] py-8 border-t border-[#4A5568]">
        <div class="max-w-6xl mx-auto px-4 text-center md:text-left flex flex-col md:flex-row justify-between items-center gap-4">
            <div>
                <p class="font-serif font-bold text-lg">Le Labyrinthe Belge</p>
                <p class="text-xs text-[#8C8C80] mt-1">Infographie interactive g√©n√©r√©e pour analyse.</p>
            </div>
            <div class="text-xs text-[#8C8C80] text-center md:text-right">
                <p>Sources simul√©es bas√©es sur la structure politique belge.</p>
                <p class="mt-1">¬© 2024 Observatoire D√©mocratique.</p>
            </div>
        </div>
    </footer>

    <script>
        // --- UTILITIES ---
        // Helper to wrap chart labels > 16 chars
        function wrapLabel(str) {
            if (str.length <= 16) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + 1 + words[i].length <= 16) {
                    currentLine += ' ' + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // Standard Chart.js Options for Responsiveness & Style
        const commonChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        font: { family: "'DM Sans', sans-serif", size: 12 },
                        color: '#4A5568',
                        usePointStyle: true,
                    }
                },
                tooltip: {
                    backgroundColor: '#2D2D2A',
                    titleFont: { family: "'DM Sans', sans-serif", size: 13 },
                    bodyFont: { family: "'DM Sans', sans-serif", size: 12 },
                    padding: 10,
                    cornerRadius: 4,
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            // Handle scatter plot logic where labels might be different or standard charts
                            if (!label && item.raw && item.raw.label) label = item.raw.label; // For custom scatter objects
                            
                            if (Array.isArray(label)) {
                                return label.join(' ');
                            } else {
                                return label;
                            }
                        }
                    }
                }
            },
            scales: {
                x: {
                    grid: { color: '#EBEBE5' },
                    ticks: { color: '#6D6D60', font: { family: "'DM Sans', sans-serif" } }
                },
                y: {
                    grid: { color: '#EBEBE5' },
                    ticks: { color: '#6D6D60', font: { family: "'DM Sans', sans-serif" } }
                }
            }
        };

        // --- TAB LOGIC ---
        function switchTab(tabId) {
            // Hide all sections
            document.querySelectorAll('section[id^="view-"]').forEach(el => el.classList.add('hidden'));
            // Remove active class from nav
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
            
            // Show selected
            document.getElementById(`view-${tabId}`).classList.remove('hidden');
            document.getElementById(`nav-${tabId}`).classList.add('active');

            // Trigger window resize to ensure charts render correctly after becoming visible
            window.dispatchEvent(new Event('resize'));
        }

        // --- STRUCTURE INTERACTION ---
        function showLayer(layerId) {
            // Reset Buttons
            document.querySelectorAll('.interactive-card').forEach(el => {
                el.classList.remove('active', 'border-l-4', 'border-[#2D2D2A]');
                el.classList.add('border-transparent');
            });
            
            // Activate Button
            const btn = document.getElementById(`btn-${layerId}`);
            btn.classList.add('active');
            btn.classList.remove('border-transparent');
            btn.classList.add('border-l-4', 'border-[#2D2D2A]');

            // Hide all content
            document.querySelectorAll('.layer-content').forEach(el => el.classList.add('hidden'));
            
            // Show content with fade
            const content = document.getElementById(`layer-content-${layerId}`);
            content.classList.remove('hidden');
            // Small timeout for opacity transition
            setTimeout(() => content.classList.add('opacity-100'), 10);
        }

        // --- CHARTS INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            
            // 1. SCATTER PLOT (Landscape)
            const ctxScatter = document.getElementById('scatterChart').getContext('2d');
            
            // Data for Scatter: X (Econ Left -10 to Right 10), Y (Unitary -10 to Separatist 10)
            // Using bubble chart to simulate scatter with clear points
            new Chart(ctxScatter, {
                type: 'scatter',
                data: {
                    // Labels required for tooltip callback logic, though usually scatter uses point data
                    labels: ['PTB', 'PS', 'Ecolo', 'MR', 'Les Engag√©s', 'N-VA', 'Vlaams Belang', 'Vooruit', 'CD&V', 'Open VLD', 'Groen'], 
                    datasets: [{
                        label: 'Partis Francophones',
                        data: [
                            {x: -9, y: 2, label: 'PTB (Extr√™me Gauche)'},
                            {x: -6, y: 0, label: 'PS (Socialistes)'},
                            {x: -7, y: 1, label: 'Ecolo (Verts)'},
                            {x: 6, y: -2, label: 'MR (Lib√©raux)'},
                            {x: -1, y: -1, label: 'Les Engag√©s (Centre)'}
                        ],
                        backgroundColor: '#D64045', // Red for FR
                        pointRadius: 8,
                        pointHoverRadius: 10
                    },
                    {
                        label: 'Partis Flamands',
                        data: [
                            {x: 7, y: 8, label: 'N-VA (Nationalistes)'},
                            {x: 8, y: 10, label: 'Vlaams Belang (Extr√™me Droite)'},
                            {x: -5, y: 1, label: 'Vooruit (Socialistes)'},
                            {x: 1, y: 4, label: 'CD&V (Chr√©tiens-D√©m)'},
                            {x: 5, y: -1, label: 'Open VLD (Lib√©raux)'},
                            {x: -7, y: 2, label: 'Groen (Verts)'}
                        ],
                        backgroundColor: '#E9B44C', // Yellow for NL
                        pointRadius: 8,
                        pointHoverRadius: 10
                    }]
                },
                options: {
                    ...commonChartOptions,
                    scales: {
                        x: {
                            title: { display: true, text: '‚Üê GAUCHE (√âconomie) DROITE ‚Üí', color: '#8C8C80' },
                            min: -10, max: 10,
                            grid: { color: '#EBEBE5' }
                        },
                        y: {
                            title: { display: true, text: '‚Üê UNITAIRE (Institutionnel) S√âPARATISTE ‚Üí', color: '#8C8C80' },
                            min: -5, max: 12, // Skewed up because separatism is high in Flanders
                            grid: { color: '#EBEBE5' }
                        }
                    },
                    plugins: {
                        ...commonChartOptions.plugins,
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw.label;
                                }
                            }
                        }
                    }
                }
            });

            // 2. BAR CHART (Formation Time)
            const ctxForm = document.getElementById('formationChart').getContext('2d');
            const labelsForm = ['Moyenne Europe', 'Belgique 2007', 'Belgique 2019', 'Belgique 2010 (Record)'];
            
            new Chart(ctxForm, {
                type: 'bar',
                data: {
                    labels: labelsForm.map(wrapLabel), // Apply wrapping requirement
                    datasets: [{
                        label: 'Jours de N√©gociation',
                        data: [40, 194, 493, 541],
                        backgroundColor: ['#C5C5B5', '#E9B44C', '#D64045', '#2D2D2A'],
                        borderRadius: 4
                    }]
                },
                options: {
                    ...commonChartOptions,
                    plugins: {
                        ...commonChartOptions.plugins,
                        legend: { display: false }
                    }
                }
            });

            // 3. LINE CHART (Blank Votes)
            const ctxBlank = document.getElementById('blankVotesChart').getContext('2d');
            new Chart(ctxBlank, {
                type: 'line',
                data: {
                    labels: ['2003', '2007', '2010', '2014', '2019'],
                    datasets: [{
                        label: '% Votes Blancs et Nuls',
                        data: [5.2, 5.1, 5.8, 5.8, 6.4], // Real historical trend
                        borderColor: '#4A5568',
                        backgroundColor: 'rgba(74, 85, 104, 0.1)',
                        tension: 0.3,
                        fill: true,
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#4A5568',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    ...commonChartOptions,
                    scales: {
                        y: {
                            min: 4,
                            max: 8,
                            title: { display: true, text: 'Pourcentage (%)' }
                        }
                    }
                }
            });
            
            // Initialize first tab
            showLayer('federal');
        });
    </script>
</body>
</html>
